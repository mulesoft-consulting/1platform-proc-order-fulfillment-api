<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns:anypoint-mq="http://www.mulesoft.org/schema/mule/anypoint-mq" xmlns:order-api="http://www.mulesoft.org/schema/mule/order-api" xmlns:customer-apispec="http://www.mulesoft.org/schema/mule/customer-apispec" xmlns:account-apispec="http://www.mulesoft.org/schema/mule/account-apispec" xmlns:customer360api="http://www.mulesoft.org/schema/mule/customer360api" xmlns:api-gateway="http://www.mulesoft.org/schema/mule/api-gateway" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:apikit="http://www.mulesoft.org/schema/mule/mule-apikit" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:notification-apispec="http://www.mulesoft.org/schema/mule/notification-apispec" xmlns:order-apispec="http://www.mulesoft.org/schema/mule/order-apispec" xmlns:product-api="http://www.mulesoft.org/schema/mule/product-api" xmlns:tls="http://www.mulesoft.org/schema/mule/tls" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd http://www.mulesoft.org/schema/mule/mule-apikit http://www.mulesoft.org/schema/mule/mule-apikit/current/mule-apikit.xsd  http://www.mulesoft.org/schema/mule/notification-apispec http://www.mulesoft.org/schema/mule/notification-apispec/current/mule-notification-apispec.xsd http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/order-apispec http://www.mulesoft.org/schema/mule/order-apispec/current/mule-order-apispec.xsd http://www.mulesoft.org/schema/mule/product-api http://www.mulesoft.org/schema/mule/product-api/current/mule-product-api.xsd
http://www.mulesoft.org/schema/mule/api-gateway http://www.mulesoft.org/schema/mule/api-gateway/current/mule-api-gateway.xsd
http://www.mulesoft.org/schema/mule/customer360api http://www.mulesoft.org/schema/mule/customer360api/current/mule-customer360api.xsd
http://www.mulesoft.org/schema/mule/account-apispec http://www.mulesoft.org/schema/mule/account-apispec/current/mule-account-apispec.xsd
http://www.mulesoft.org/schema/mule/customer-apispec http://www.mulesoft.org/schema/mule/customer-apispec/current/mule-customer-apispec.xsd
http://www.mulesoft.org/schema/mule/order-api http://www.mulesoft.org/schema/mule/order-api/current/mule-order-api.xsd
http://www.mulesoft.org/schema/mule/anypoint-mq http://www.mulesoft.org/schema/mule/anypoint-mq/current/mule-anypoint-mq.xsd">
    <http:listener-config name="order-fulfillment-api-httpListenerConfig">
        <http:listener-connection host="0.0.0.0" port="${https.port}" protocol="HTTPS">
            <tls:context>
                <tls:key-store type="jks" path="${keystore.path}" keyPassword="${keystore.password}" password="${keystore.password}" />
            </tls:context>
        </http:listener-connection>
    </http:listener-config>
    <apikit:config name="order-fulfillment-api-config" raml="order-fulfillment-api.raml" outboundHeadersMapName="outboundHeaders" httpStatusVarName="httpStatus" />
    <configuration-properties doc:name="Configuration properties" doc:id="ab19b88e-0a17-47f2-a585-8c6c47e1c56d" file="config/configuration.yaml" />
    <product-api:config name="Product_API_Config" doc:name="Product API Config" doc:id="15934460-ba33-4d15-b590-45644229513d" property_host="${product.dapi.host}" property_basePath="${product.dapi.basePath}" property_client-id="${app.client_id}" property_client-secret="${app.client_secret}" property_port="${product.dapi.port}" property_protocol="${product.dapi.protocol}"/>
    <customer-apispec:config name="Customer_API_Spec_Config" doc:name="Customer API Spec Config" doc:id="26ded8aa-ffba-4a13-9c1a-62668c350e33" property_host="${customer.dapi.host}" property_port="${customer.dapi.port}" property_basePath="${customer.dapi.basePath}" property_protocol="${customer.dapi.protocol}" property_client-id="${app.client_id}" property_client-secret="${app.client_secret}" />
    <api-gateway:autodiscovery apiId="${app.autodiscovery}" doc:name="API Autodiscovery" doc:id="1cb413b3-fbfd-4b50-9bf3-6491e6933b52" flowRef="order-fulfillment-api-main" />
	<order-api:config name="Order_API_Spec_Config" doc:name="Order API Spec Config" doc:id="afecea7a-d12f-4c97-b456-722e2e4de2bd" property_host="${order.dapi.host}" property_basePath="${order.dapi.basePath}" property_client-id="${app.client_id}" property_client-secret="${app.client_secret}" property_port="${order.dapi.port}" property_protocol="${order.dapi.protocol}"/>
	<!-- <order-apispec:config name="Order_API_Spec_Config" doc:name="Order API Spec Config" doc:id="df82e24b-21c6-4320-a8a4-858915bc233a" property_host="${order.dapi.host}" property_basePath="${order.dapi.basePath}" property_client-id="${app.client.id}" property_client-secret="${app.client.secret}" property_port="${order.dapi.port}" property_protocol="${order.dapi.protocol}"/> -->
	<anypoint-mq:default-subscriber-config name="Anypoint_MQ_Default_subscriber" doc:name="Anypoint MQ Default subscriber" doc:id="6a15d5aa-10ff-41df-b6bf-81dcbf920450" >
		<anypoint-mq:connection clientId="${anypoint.mq.client.id}" url="${anypoint.mq.url}" clientSecret="${anypoint.mq.client.secret}"/>
	</anypoint-mq:default-subscriber-config>	
</mule>
